services:
  redis:
    image: redis:7-alpine
    ports:
      - "6379:6379"
    networks:
      - wsproxy-network

  wsproxy:
    image: wsproxy-wsproxy
    ports:
      - "4040:4040"
    environment:
      - HOST=0.0.0.0
      - PORT=4040
      - REDIS_URL=redis://redis:6379
      - WS_PING_INTERVAL_SECS=15
      - WS_PING_TIMEOUT_SECS=30
      - SHUTDOWN_GRACE_PERIOD_SECS=30
      - MAX_MESSAGE_SIZE_BYTES=1048576
      - AUTH_TIMEOUT_SECS=5
      - AUTH_GRACE_PERIOD_SECS=10800
      - RUST_LOG=info,wsproxy=debug
      - LOG_LEVEL=info
    networks:
      - wsproxy-network

networks:
  wsproxy-network:
    driver: bridge